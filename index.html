<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AR Puzzle Game</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: #f8f8f8;
      min-height: 100vh;
      text-align: center;
    }
    h1 { margin-bottom: 0.5rem; }
    .clue, .progress {
      font-size: 1.2rem;
      margin: 1rem 0;
    }
    model-viewer {
      width: 100%;
      max-width: 400px;
      height: 400px;
      background: #eee;
      border-radius: 12px;
      margin: 1rem 0;
    }
  </style>
</head>
<body>
  <h1>üîç You've Found a Puzzle Piece!</h1>
  <div class="clue"></div>

  <model-viewer id="model" camera-controls auto-rotate ar ar-modes="webxr scene-viewer quick-look" alt="Puzzle Piece"></model-viewer>

  <div class="progress"></div>

  <script>
    const clues = {
      1: "üìç Clue 1: Find the red bench.",
      2: "üìç Clue 2: Tallest tree nearby.",
      3: "üìç Clue 3: Entrance of the library.",
      4: "üìç Clue 4: Look near the fountain.",
      5: "üìç Clue 5: Big clock hides the clue.",
      6: "üìç Clue 6: Explore the food court.",
      7: "üìç Clue 7: Go to the play area.",
      8: "üìç Clue 8: Skate park awaits.",
      9: "üìç Clue 9: Exit gate has something.",
      10: "üéâ Final Clue: You've made it!"
    };

    const params = new URLSearchParams(window.location.search);
    const qr = parseInt(params.get("qr"));

    const clueBox = document.querySelector(".clue");
    const progressBox = document.querySelector(".progress");
    const modelViewer = document.querySelector("#model");

    if (qr && qr >= 1 && qr <= 10) {
      clueBox.textContent = clues[qr];
      progressBox.textContent = `üß© Progress: Piece ${qr} of 10`;
      modelViewer.setAttribute("src", `models/piece${qr}.glb`);
    } else {
      clueBox.textContent = "‚ö†Ô∏è Invalid or missing QR code.";
      modelViewer.style.display = "none";
      progressBox.textContent = "";
    }
  </script>
</body>
</html>
